{{ define "sortableTableHead" }}
<thead>
  <tr>
    {{ range .Headings }}
    <th class="py-1 last:pr-1 first:pl-1" hx-get="{{ $.TableURL }}?orderBy={{ .Index }}&orderDesc={{ if eq .Index $.OrderBy }}{{ not $.OrderDesc }}{{ else }}false{{ end }}" hx-target=".dataTable" hx-swap="outerHTML">
      <button class="gap-1 px-1 py-2 rounded-lg w-full min-h-10 btn">
        {{ .Name }}
        <i class="{{ if $.OrderDesc }}fa-sort-up{{ else }}fa-sort{{ end }} fas{{ if ne $.OrderBy .Index }} opacity-0{{ end }}"></i>
      </button>
    </th>
    {{ end }}
    <th class="sr-only">Azioni</th>
   </tr>
 </thead>
{{ end }}

{{ define "suppliersTable" }}
<div class="dataTable">
  <table>
    {{ template "sortableTableHead" . }}

    <tbody>
      {{ range .Suppliers }}
      <tr>
        <td>{{ .ID }}</td>
        <td>{{ .Name }}</td>
        <td>{{ .Email }}</td>
        <td>
          <a class="btn-md" href="/console/suppliers/{{ .ID }}">
            <i class="fa-pen fas"></i>
          </a>
        </td>
      </tr>
      {{ end }}
    </tbody>
  </table>
</div>
{{ end }}

{{ define "productsTable" }}
<div class="dataTable">
  <table>
    {{ template "sortableTableHead" . }}

    <tbody>
      {{ range .Products }} 
      <tr>
        <td>{{ .ID }}</td>
        <td>
          <span class="line-clamp-2">{{ .Description }}</span>
        </td>
        <td>{{ .Code }}</td>
        <td>{{ .ProductType.Name }}</td>
        <td>
          <a class="link" href="/console/suppliers/{{ .Supplier.ID }}">{{ .Supplier.Name }}</a>
        </td>
        <td>{{ .UnitOfMeasure.Symbol }}</td>
        <td>
          <a class="btn-md" href="/console/products/{{ .ID }}">
            <i class="fa-pen fas"></i>
          </a>
        </td>
      </tr>
      {{ end }}
    </tbody>
  </table>
</div>
{{ end }}

{{ define "usersTable" }}
<div class="dataTable">
  <table>
    {{ template "sortableTableHead" . }}

    <tbody>
      {{ range .Users }}
      <tr>
        <td>{{ .ID }}</td>
        <td class="max-w-14 text-ellipsis overflow-clip">{{ .Role.Name }}</td>
        <td>{{ .Username }}</td>
        <td>{{ .Name }}</td>
        <td>{{ .Surname }}</td>
        <td>
          <a class="btn-md" href="/console/users/{{ .ID }}">
            <i class="fa-pen fas"></i>
          </a>
        </td>
      </tr>
      {{ end }}
    </tbody>
  </table>
</div>
{{ end }}
